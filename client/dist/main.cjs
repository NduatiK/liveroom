"use strict";var a=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var f=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of u(t))!p.call(e,o)&&o!==n&&l(e,o,{get:()=>t[o],enumerable:!(r=d(t,o))||r.enumerable});return e};var _=(e,t,n)=>(n=e!=null?a(v(e)):{},f(t||!e||!e.__esModule?l(n,"default",{value:e,enumerable:!0}):n,e));const y=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"})),j="liveroom-client-element",g="0.0.18",h="module",b="./dist/main.js",w="./dist/main.cjs",k=["dist","!dist/vite.svg"],E={".":{import:"./dist/main.js",require:"./dist/main.cjs"},"./liveroom-client-element":{import:"./dist/liveroom-client-element.js",require:"./dist/liveroom-client-element.cjs"}},q={dev:"vite",build:"vite build",preview:"vite preview",format:"prettier --write .","check-format":"prettier . --check",check:"svelte-check --tsconfig ./tsconfig.json",lint:"npm run check-format && npm run check"},S={"phx-live-state":"^0.9.4"},A={"@sveltejs/vite-plugin-svelte":"^2.4.2","@tsconfig/svelte":"^5.0.0",prettier:"3.0.1",svelte:"^4.0.5","svelte-check":"^3.4.6",tslib:"^2.6.0",typescript:"^5.0.2",vite:"^4.4.5"},L={name:j,private:!1,version:g,type:h,module:b,main:w,files:k,exports:E,scripts:q,dependencies:S,devDependencies:A},I=L.version;let c,s,i=null;m();P();const O="liveroom-client-element";async function m(){const t=new URLSearchParams(window.location.search).get("_liveroom");i=document.querySelector("script[src*='/liveroom-client-element']")||document.querySelector("script[src*='/client/dist/main.js']")||document.querySelector("script[src='/src/main.ts']");const n=(i==null?void 0:i.getAttribute("data-url"))||"wss://liveroom.app/client_socket",r=(i==null?void 0:i.getAttribute("data-roomid"))||null,o=t||r;o&&o!=c&&(c=o,s&&(s.remove(),s=void 0),await x(n,c))}function P(){window.addEventListener("popstate",m)}async function x(e,t){var n;return t?(await((n=i==null?void 0:i.getAttribute("src"))!=null&&n.startsWith("https://cdn.jsdelivr.net/npm/liveroom-client-element@0.0.18")?import("https://cdn.jsdelivr.net/npm/liveroom-client-element@0.0.18/dist/liveroom-client-element.min.js"):Promise.resolve().then(()=>y(require("./liveroom-client-element.cjs")))),console.log(`[Liveroom] Installed successfully (v${I})`),s=document.createElement(O),s.setAttribute("url",e),t&&s.setAttribute("room_id",t),document.body.appendChild(s),console.log("[Liveroom] Injected successfully"),!0):!1}
